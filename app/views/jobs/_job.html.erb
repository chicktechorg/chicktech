<div class="job-descriptions">
  <h3>Job Title: <%= link_to job.name, job_path(job) %></h3>
  <% if job.taken? %>
    <p><span class='label'>Taken by:</span> <%= job.user.first_name %> <%= job.user.last_name %></p>
  <% else %>
    <%= form_for job do |f| %>
      <%= f.hidden_field :signing_up, :value => true %>
      <%= f.submit "Sign Up!", :method => :patch, :class => "submit-no-button" %>
    <% end %>
  <% end %>

  <p><span class='label'>Description:</span> <%= job.description %></p>

  <% if job.try(:due_date) %>
    <p><span class='label'>Due Date:</span> <%= job.due_date.to_time.strftime("%b %-d, %Y") %></p>
  <% end %>

  <% if can? :update, job %>
    <%= form_for job do |f| %>
      <%= f.hidden_field :job_done, :value => true %>
      <% if job.done %>
        <p><span class='label'>This job is:</span> <%= f.submit "Not Done", :method => :patch, :class => "sign-in-button-small" %></p>
      <% else %>
        <p><span class='label'>This job is:</span> <%= f.submit "Done", :method => :patch, :class => "sign-in-button-small" %><p>
      <% end %>
    <% end %>
    <div class="edit-delete-indent">
      <%= link_to "Edit", edit_job_path(job) %>
      <%= link_to "Delete", job_path(job), :method => :delete, :data => { :confirm => 'Are you sure?' } %>
    
      <% if can?(:update, job) %>
        <div class="remove">
          <%= link_to (job.owned_by?(current_user) ? "Resign" : "Unassign"), job_path(job, :job => { :resigning => true }), :method => :patch, :class => "remove" %>
        </div>
      <% end %>
    </div>
  <% end %>  
</div>

